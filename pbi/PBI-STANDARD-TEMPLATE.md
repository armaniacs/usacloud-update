# PBI標準テンプレート・構造仕様

## 概要
このドキュメントでは、usacloud-updateプロジェクトで使用される全23個のPBI（Product Backlog Item）ファイルの標準構造とテンプレートを定義します。一貫性のある文書化により、開発効率と保守性を向上させます。

## PBI標準構造

### 基本セクション構成
```markdown
# PBI-XXX: [機能名]

## 概要
[機能の目的と簡潔な説明]

## 受け入れ条件
- [ ] [検証可能な条件1]
- [ ] [検証可能な条件2]
- [ ] [検証可能な条件3]

## 技術仕様

### [実装アーキテクチャ]
#### 1. [コンポーネント名]
```go
// コード例とインターフェース定義
```

#### 2. [詳細実装]
```go
// 具体的な実装例
```

## テスト戦略
- [テスト方針1]: [説明]
- [テスト方針2]: [説明]

## 依存関係
- 前提PBI: [依存するPBI]
- 関連PBI: [関連するPBI]

## 見積もり
- 開発工数: X時間
  - [作業項目1]: X時間
  - [作業項目2]: X時間

## 完了の定義
- [ ] [検証可能な完了条件1]
- [ ] [検証可能な完了条件2]

## 備考
- [重要な注意事項]
```

### セクション別詳細仕様

#### 1. ヘッダー部（必須）
- **形式**: `# PBI-XXX: [機能名]`
- **命名規則**: 
  - PBI番号は3桁ゼロパディング（001-023）
  - 機能名は日本語で簡潔に
  - 技術的過ぎない、ビジネス価値が分かる名前

#### 2. 概要セクション（必須）
- **目的**: 機能の価値と目的を2-3文で説明
- **内容要件**:
  - なぜこの機能が必要か
  - どのような価値を提供するか
  - 対象ユーザー層の明示

#### 3. 受け入れ条件セクション（必須）
- **形式**: チェックボックス形式のリスト
- **要件**:
  - 客観的に検証可能であること
  - 完了判定に使用可能であること
  - 3-5個程度に絞り込む

#### 4. 技術仕様セクション（必須）
- **構造**: 階層化されたサブセクション
- **内容**:
  - 実装アーキテクチャ図
  - インターフェース定義
  - コード例とサンプル
  - データ構造定義

#### 5. テスト戦略セクション（必須）
- **内容**:
  - テスト方針の明文化
  - テストレベル（Unit/Integration/E2E）
  - 品質保証アプローチ

#### 6. 依存関係セクション（必須）
- **分類**:
  - 前提PBI: 実装前に完了必須
  - 関連PBI: 同時期実装推奨
  - 既存コード: 影響を受ける既存実装

#### 7. 見積もりセクション（必須）
- **構成**:
  - 総工数（時間単位）
  - 作業項目別内訳
  - リスク要因の考慮

#### 8. 完了の定義セクション（必須）
- **要件**:
  - 客観的検証可能性
  - コードレビュー完了
  - テスト通過
  - ドキュメント整備

#### 9. 備考セクション（推奨）
- **内容**:
  - 重要な技術的考慮事項
  - 制約事項
  - 将来的な拡張可能性

## PBIカテゴリ別特化要素

### 1. Command Dictionary PBI（PBI-001～006）
**特殊要素**:
- コマンド一覧の完全性
- GitHub実装との整合性確認
- サブコマンド階層の明確な定義

**テンプレート拡張**:
```markdown
### コマンド一覧
```bash
# 対象コマンド例
command1, command2, command3
```

### GitHub参照実装
- 参照URL: [GitHub実装へのリンク]
- 実装ファイル: [具体的なファイルパス]
```

### 2. Validation Engine PBI（PBI-007～010）
**特殊要素**:
- 検証アルゴリズムの詳細
- エラー分類体系
- パフォーマンス要件

**テンプレート拡張**:
```markdown
### 検証アルゴリズム
```go
// アルゴリズム実装詳細
```

### エラー分類
- Type A: [説明]
- Type B: [説明]
```

### 3. Error Feedback PBI（PBI-011～014）
**特殊要素**:
- ユーザビリティ考慮
- 多言語対応
- アクセシビリティ

**テンプレート拡張**:
```markdown
### ユーザビリティ設計
- 対象ユーザー: [初心者/中級者/上級者]
- UX原則: [具体的な原則]

### 多言語対応
- 対応言語: 日本語、英語
- メッセージ管理: [管理方法]
```

### 4. Integration PBI（PBI-015～017）
**特殊要素**:
- システム統合観点
- 後方互換性保証
- 段階的移行戦略

**テンプレート拡張**:
```markdown
### 統合アーキテクチャ
[システム統合図]

### 後方互換性
- 保証レベル: [完全/部分/なし]
- 移行戦略: [段階的移行計画]
```

### 5. Testing PBI（PBI-018～023）
**特殊要素**:
- テスト分類体系
- 品質メトリクス
- CI/CD統合

**テンプレート拡張**:
```markdown
### テスト分類
- Unit Tests: [範囲と責務]
- Integration Tests: [範囲と責務]
- E2E Tests: [範囲と責務]

### 品質メトリクス
- カバレッジ目標: X%
- パフォーマンス基準: [具体的基準]
```

## 命名規則・記述規則

### ファイル命名規則
- **形式**: `PBI-XXX-[kebab-case-description].md`
- **例**: `PBI-001-iaas-commands.md`

### セクション見出し規則
- **レベル1**: `#` - PBIタイトルのみ
- **レベル2**: `##` - 主要セクション
- **レベル3**: `###` - サブセクション
- **レベル4**: `####` - 詳細項目

### コード記述規則
```markdown
### 実装例
```go
// コメントは日本語で記述
// インターフェースは英語で定義
type ComponentInterface interface {
    Method() error
}
```
```

### リスト記述規則
- **チェックボックス**: `- [ ]` 未完了、`- [x]` 完了
- **通常リスト**: `-` または `1.` を使用
- **ネスト**: 2スペースでインデント

## 品質チェックリスト

### 内容品質
- [ ] 概要が2-3文で簡潔に記述されている
- [ ] 受け入れ条件が客観的に検証可能である
- [ ] 技術仕様に具体的なコード例が含まれている
- [ ] テスト戦略が明確に定義されている
- [ ] 依存関係が正確に記載されている
- [ ] 見積もりが現実的で根拠がある
- [ ] 完了の定義が明確で測定可能である

### 構造品質
- [ ] 全必須セクションが含まれている
- [ ] 見出しレベルが適切に階層化されている
- [ ] コードブロックが正しくフォーマットされている
- [ ] リンクと参照が正しく機能する
- [ ] 文書構造が論理的で読みやすい

### 一貫性品質
- [ ] 用語の使用が統一されている
- [ ] 記述スタイルが一貫している
- [ ] 技術的詳細レベルが適切である
- [ ] 他のPBIとの整合性が保たれている

## PBI作成・更新フロー

### 1. 新規PBI作成
```bash
1. テンプレートファイルをコピー
2. PBI番号を採番
3. 標準構造に従ってコンテンツ作成
4. 品質チェックリスト実行
5. レビュー・承認
```

### 2. 既存PBI更新
```bash
1. 変更理由と影響範囲の明確化
2. 依存関係への影響確認
3. 標準構造適合性チェック
4. 品質チェックリスト実行
5. 関連PBIの更新確認
```

### 3. レビュープロセス
- **構造レビュー**: テンプレート適合性
- **内容レビュー**: 技術的正確性
- **一貫性レビュー**: 他PBIとの整合性

## ツール・支援機能

### PBI管理スクリプト（構想）
```bash
# PBI作成支援
./scripts/create_pbi.sh --number=024 --category=enhancement

# 一貫性チェック
./scripts/validate_pbi.sh --all

# 依存関係可視化
./scripts/visualize_dependencies.sh --output=pbi_dependencies.png
```

### テンプレート管理
- 標準テンプレートファイルの保守
- カテゴリ別特化テンプレートの管理
- 自動チェック機能の実装

## 改善・発展計画

### Phase 1: 標準化完了
- [ ] 全23個PBIの標準準拠確認
- [ ] 品質チェックリスト全項目クリア
- [ ] ドキュメント整備完了

### Phase 2: 自動化導入
- [ ] PBI作成支援ツール開発
- [ ] 自動品質チェック機能
- [ ] 依存関係管理機能

### Phase 3: 継続改善
- [ ] フィードバック収集と反映
- [ ] テンプレート進化
- [ ] ベストプラクティス蓄積

## 関連リソース

### 参照ドキュメント
- [Product Backlog Management Best Practices]
- [Technical Documentation Standards]
- [Agile Development Guidelines]

### 外部テンプレート参考
- [IEEE Software Requirements Specification]
- [SWEBOK Guide]
- [Agile Alliance PBI Guidelines]

---

**策定日**: 2025-09-09
**最終更新**: 2025-09-09
**バージョン**: 1.0
**承認者**: Development Team