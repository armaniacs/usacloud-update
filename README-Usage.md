# usacloud-update ä½¿ç”¨ã‚¬ã‚¤ãƒ‰

## æ¦‚è¦

`usacloud-update` ã¯ã€usacloud ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ v0ã€v1.0ã€v1.1 ã®è¨˜è¿°ãŒæ··åœ¨ã—ãŸ bash ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã€v1.1 ã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«è‡ªå‹•å¤‰æ›ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

å»ƒæ­¢ã•ã‚ŒãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€å¤‰æ›´ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹åã€æ–°ã—ã„ã‚³ãƒãƒ³ãƒ‰å¼•æ•°å½¢å¼ãªã©ã‚’è‡ªå‹•ã§æ›´æ–°ã—ã€å¤‰æ›ã§ããªã„ç®‡æ‰€ã¯è©³ç´°ãªã‚³ãƒ¡ãƒ³ãƒˆã¨å…±ã«æ‰‹å‹•å¯¾å¿œã‚’ä¿ƒã—ã¾ã™ã€‚

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«ã¤ã„ã¦

**v1.9.0ã‚ˆã‚Šã€é–‹ç™ºç‰ˆ/ãƒªãƒªãƒ¼ã‚¹ç‰ˆã‚’åŒºåˆ¥ã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’æ¡ç”¨:**

- **å¥‡æ•°ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ (v1.9.0, v2.1.0, ...) = é–‹ç™ºç‰ˆ**
  - æ–°æ©Ÿèƒ½é–‹ç™ºãƒ»å®Ÿé¨“çš„æ©Ÿèƒ½ã‚’å«ã‚€
  - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ»ãƒ†ã‚¹ãƒˆæ­“è¿
- **å¶æ•°ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ (v2.0.0, v2.2.0, ...) = ãƒªãƒªãƒ¼ã‚¹ç‰ˆ** 
  - å®‰å®šç‰ˆãƒ»æœ¬ç•ªåˆ©ç”¨æ¨å¥¨
  - ååˆ†ãªãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼æ¸ˆã¿

ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³: **v1.9.0 (é–‹ç™ºç‰ˆ)**

### v1.9.0 æ–°æ©Ÿèƒ½: ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹çµ±åˆ

ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½ã«ã‚ˆã‚Šã€å¤‰æ›ã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿéš›ã® Sakura Cloud ç’°å¢ƒã§å®‰å…¨ã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã§ãã¾ã™ã€‚

- ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒï¼štk1v ã‚¾ãƒ¼ãƒ³ã§ã®æ–™é‡‘ãªã—ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–TUIï¼šç›´æ„Ÿçš„ãªã‚³ãƒãƒ³ãƒ‰é¸æŠãƒ»å®Ÿè¡Œã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- ãƒãƒƒãƒå®Ÿè¡Œï¼šå…¨ã‚³ãƒãƒ³ãƒ‰ã®è‡ªå‹•å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰
- ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ãƒ¢ãƒ¼ãƒ‰ï¼šå®Ÿè¡Œã›ãšã«çµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- BDDãƒ†ã‚¹ãƒˆï¼šè¡Œå‹•é§†å‹•é–‹ç™ºã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### ãƒ“ãƒ«ãƒ‰æ–¹æ³•

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/armaniacs/usacloud-update.git
cd usacloud-update

# ãƒ“ãƒ«ãƒ‰
make build

# ãƒã‚¤ãƒŠãƒªã®ç¢ºèª
./bin/usacloud-update --help
```

### å‹•ä½œç¢ºèª

```bash
# ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã§ã®å‹•ä½œãƒ†ã‚¹ãƒˆ
make run

# æœŸå¾…çµæœã¨ã®æ¯”è¼ƒ
make verify-sample
```

## åŸºæœ¬çš„ãªä½¿ã„æ–¹

### ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å½¢å¼

```bash
usacloud-update [ã‚ªãƒ—ã‚·ãƒ§ãƒ³]
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|-----------|-----------|------|
| `--in` | `-` (stdin) | å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| `--out` | `-` (stdout) | å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| `--stats` | `true` | å¤‰æ›´çµ±è¨ˆã‚’ stderr ã«å‡ºåŠ› |
| `--config` | (è‡ªå‹•æ¤œå‡º) | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼ˆã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½ç”¨ï¼‰ |
| `--sandbox` | `false` | ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã§ã®å®Ÿéš›ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ |
| `--interactive` | `true` | ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–TUIãƒ¢ãƒ¼ãƒ‰ (sandboxã¨ã®çµ„ã¿åˆã‚ã›ã§ä½¿ç”¨) |
| `--dry-run` | `false` | å®Ÿéš›ã®å®Ÿè¡Œã‚’è¡Œã‚ãšå¤‰æ›çµæœã®ã¿è¡¨ç¤º |
| `--batch` | `false` | ãƒãƒƒãƒãƒ¢ãƒ¼ãƒ‰: é¸æŠã—ãŸå…¨ã‚³ãƒãƒ³ãƒ‰ã‚’è‡ªå‹•å®Ÿè¡Œ |

### ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

#### 1. æ¨™æº–å…¥å‡ºåŠ›ã‚’ä½¿ç”¨

```bash
# ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
cat input.sh | usacloud-update > output.sh

# ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
usacloud-update < input.sh > output.sh
```

#### 2. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥æŒ‡å®š

```bash
# ãƒ•ã‚¡ã‚¤ãƒ«é–“å¤‰æ›
usacloud-update --in input.sh --out output.sh

# çµ±è¨ˆå‡ºåŠ›ã‚’ç„¡åŠ¹åŒ–
usacloud-update --in input.sh --out output.sh --stats=false
```

#### 3. ç¢ºèªã—ãªãŒã‚‰å®Ÿè¡Œ

```bash
# çµ±è¨ˆã®ã¿ã‚’ç¢ºèªï¼ˆå‡ºåŠ›ã¯ç ´æ£„ï¼‰
usacloud-update --in script.sh --out /dev/null

# çµ±è¨ˆã¨å‡ºåŠ›ã®ä¸¡æ–¹ã‚’ç¢ºèª
usacloud-update --in script.sh --out updated_script.sh
```

## å¤‰æ›ä¾‹

### å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ä¾‹ (`sample.sh`)

```bash
#!/usr/bin/env bash
set -euo pipefail

# å¤ã„å‡ºåŠ›å½¢å¼
usacloud server list --output-type=csv

# å¤ã„ã‚»ãƒ¬ã‚¯ã‚¿æ§‹æ–‡
usacloud disk read --selector name=mydisk
usacloud server delete --selector tag=to-be-removed

# å¤‰æ›´ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹å
usacloud iso-image list
usacloud startup-script list
usacloud ipv4 read --zone tk1a --ipaddress 203.0.113.10

# å¤ã„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå
usacloud product-disk list

# å»ƒæ­¢ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰
usacloud summary

# éå¯¾å¿œã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
usacloud object-storage list

# ã‚¾ãƒ¼ãƒ³æŒ‡å®šã®è¨˜è¿°ã‚†ã‚Œ
usacloud server list --zone = all
```

### å¤‰æ›å¾Œã®å‡ºåŠ›

```bash
# Updated for usacloud v1.1 by usacloud-update â€” DO NOT EDIT ABOVE THIS LINE
#!/usr/bin/env bash
set -euo pipefail

# å¤ã„å‡ºåŠ›å½¢å¼
usacloud server list --output-type=json # usacloud-update: v1.0ã§csv/tsvã¯å»ƒæ­¢ã€‚jsonã«ç½®æ›ã—ã€å¿…è¦ãªã‚‰ --query/jq ã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ (https://docs.usacloud.jp/usacloud/upgrade/v1_0_0/)

# å¤ã„ã‚»ãƒ¬ã‚¯ã‚¿æ§‹æ–‡
usacloud disk read mydisk # usacloud-update: --selectorã¯v1ã§å»ƒæ­¢ã€‚ID/åç§°/ã‚¿ã‚°ã‚’ã‚³ãƒãƒ³ãƒ‰å¼•æ•°ã«æŒ‡å®šã™ã‚‹ä»•æ§˜ã¸ç§»è¡Œ (https://docs.usacloud.jp/usacloud/upgrade/v1_0_0/)
usacloud server delete to-be-removed # usacloud-update: --selectorã¯v1ã§å»ƒæ­¢ã€‚ID/åç§°/ã‚¿ã‚°ã‚’ã‚³ãƒãƒ³ãƒ‰å¼•æ•°ã«æŒ‡å®šã™ã‚‹ä»•æ§˜ã¸ç§»è¡Œ (https://docs.usacloud.jp/usacloud/upgrade/v1_0_0/)

# å¤‰æ›´ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹å
usacloud cdrom list # usacloud-update: v1ã§ã¯ãƒªã‚½ãƒ¼ã‚¹åãŒcdromã«çµ±ä¸€ (https://manual.sakura.ad.jp/cloud-api/1.1/cdrom/index.html)
usacloud note list # usacloud-update: v1ã§ã¯startup-scriptã¯noteã«çµ±ä¸€ (https://docs.usacloud.jp/usacloud/)
usacloud ipaddress read --zone tk1a --ipaddress 203.0.113.10 # usacloud-update: v1ã§ã¯IPv4é–¢é€£ã¯ipaddressã«æ•´ç† (https://docs.usacloud.jp/usacloud/references/ipaddress/)

# å¤ã„ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå
usacloud disk-plan list # usacloud-update: v1ç³»ã§ã¯ *-plan ã¸åç§°çµ±ä¸€ (https://docs.usacloud.jp/usacloud/)

# å»ƒæ­¢ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰
# usacloud summary # usacloud-update: summaryã‚³ãƒãƒ³ãƒ‰ã¯v1ã§å»ƒæ­¢ã€‚è¦ä»¶ã«å¿œã˜ã¦ bill/self/å„list ã‹ rest ã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ (https://docs.usacloud.jp/usacloud/upgrade/v1_0_0/)

# éå¯¾å¿œã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
# usacloud object-storage list # usacloud-update: v1ã§ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ“ä½œã¯éå¯¾å¿œæ–¹é‡ã€‚S3äº’æ›ãƒ„ãƒ¼ãƒ«/ä»–ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚„Terraformã‚’æ¤œè¨ (https://github.com/sacloud/usacloud/issues/585)

# ã‚¾ãƒ¼ãƒ³æŒ‡å®šã®è¨˜è¿°ã‚†ã‚Œ
usacloud server list --zone=all # usacloud-update: å…¨ã‚¾ãƒ¼ãƒ³ä¸€æ‹¬æ“ä½œã¯ --zone=all ã‚’æ¨å¥¨ (https://docs.usacloud.jp/usacloud/upgrade/v1_0_0/)
```

### çµ±è¨ˆå‡ºåŠ›ä¾‹ (stderr)

```
#L5    --output-type=csv => --output-type=json [output-type-csv-tsv]
#L8    --selector name=mydisk => mydisk [selector-to-arg]
#L9    --selector tag=to-be-removed => to-be-removed [selector-to-arg]
#L12   iso-image => cdrom [iso-image-to-cdrom]
#L13   startup-script => note [startup-script-to-note]
#L14   ipv4 => ipaddress [ipv4-to-ipaddress]
#L17   product-disk => disk-plan [product-alias-product-disk]
#L20   usacloud summary => # usacloud summary [summary-removed]
#L23   usacloud object-storage list => # usacloud object-storage list [object-storage-removed-object-storage]
#L26   --zone = all => --zone=all [zone-all-normalize]
```

## ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½

v2.0.0ã§è¿½åŠ ã•ã‚ŒãŸã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½ã«ã‚ˆã‚Šã€å¤‰æ›ã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿéš›ã®Sakura Cloudç’°å¢ƒã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã§ãã¾ã™ã€‚

### æ¦‚è¦

ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½ã¯ä»¥ä¸‹ã®ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚

- å®‰å…¨ãªãƒ†ã‚¹ãƒˆç’°å¢ƒï¼šSakura Cloud ã® tk1v ã‚¾ãƒ¼ãƒ³ï¼ˆã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å°‚ç”¨ï¼‰ã‚’ä½¿ç”¨
- æ–™é‡‘ãªã—ï¼šã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã§ã¯èª²é‡‘ã•ã‚Œã¾ã›ã‚“
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–TUIï¼šå€‹åˆ¥ã‚³ãƒãƒ³ãƒ‰ã®é¸æŠãƒ»å®Ÿè¡ŒãŒå¯èƒ½
- ãƒãƒƒãƒå®Ÿè¡Œï¼šå…¨ã‚³ãƒãƒ³ãƒ‰ã®è‡ªå‹•å®Ÿè¡Œã‚‚å¯èƒ½
- ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ãƒ¢ãƒ¼ãƒ‰ï¼šå®Ÿè¡Œã›ãšã«çµæœã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

### ç’°å¢ƒè¨­å®š

#### 1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€Sakura Cloudã®APIã‚­ãƒ¼ãŒå¿…è¦ã§ã™ã€‚

**ã€æ¨å¥¨ã€‘è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ–¹å¼**:
```bash
# ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚è€ƒã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
mkdir -p ~/.config/usacloud-update
cp usacloud-update.conf.sample ~/.config/usacloud-update/usacloud-update.conf

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ã‚’è¨­å®š
vim ~/.config/usacloud-update/usacloud-update.conf
```

ã¾ãŸã¯ã€åˆå›å®Ÿè¡Œæ™‚ã«å¯¾è©±çš„ã«ä½œæˆã§ãã¾ã™ã€‚
```bash
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„å ´åˆã€è‡ªå‹•çš„ã«å¯¾è©±çš„è¨­å®šãŒé–‹å§‹ã•ã‚Œã¾ã™
usacloud-update --sandbox
```

**ã‚«ã‚¹ã‚¿ãƒ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**:
```bash
# --config ãƒ•ãƒ©ã‚°ã§ç‰¹å®šã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®š
usacloud-update --sandbox --config /path/to/custom.conf --in script.sh
```

**ã‚«ã‚¹ã‚¿ãƒ è¨­å®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**ï¼ˆCI/CDç’°å¢ƒãªã©ç‰¹åˆ¥ãªå ´åˆï¼‰
```bash
export USACLOUD_UPDATE_CONFIG_DIR=/path/to/custom/config
usacloud-update --sandbox
```

**ã€ãƒ¬ã‚¬ã‚·ãƒ¼ã€‘ç’°å¢ƒå¤‰æ•°æ–¹å¼**:
```bash
# ç’°å¢ƒå¤‰æ•°ã‚’ç›´æ¥è¨­å®šï¼ˆå»ƒæ­¢äºˆå®šï¼‰
export SAKURACLOUD_ACCESS_TOKEN="your-access-token"
export SAKURACLOUD_ACCESS_TOKEN_SECRET="your-secret"
```

#### 2. APIã‚­ãƒ¼ã®å–å¾—æ–¹æ³•

1. [ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«](https://secure.sakura.ad.jp/cloud/)ã«ãƒ­ã‚°ã‚¤ãƒ³
2. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€Œè¨­å®šã€â†’ã€ŒAPIã‚­ãƒ¼ã€ã‚’é¸æŠ
3. ã€Œè¿½åŠ ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. åå‰ã‚’å…¥åŠ›ï¼ˆä¾‹: `usacloud-update-sandbox`ï¼‰
5. ã€Œä½œæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
6. è¡¨ç¤ºã•ã‚ŒãŸã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®š

#### 3. usacloud CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# macOS (Homebrew)
brew install sacloud/tap/usacloud

# Linux/Windows ãƒã‚¤ãƒŠãƒª
# https://docs.usacloud.jp/usacloud/installation/ ã‚’å‚ç…§
```

### ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

#### 1. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

```bash
# åŸºæœ¬çš„ãªã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å®Ÿè¡Œ
usacloud-update --sandbox --in script.sh

# TUIãŒèµ·å‹•ã—ã€ä»¥ä¸‹ã®æ“ä½œãŒå¯èƒ½ï¼š
# - â†‘â†“: ã‚³ãƒãƒ³ãƒ‰é¸æŠ
# - Space: å€‹åˆ¥ã‚³ãƒãƒ³ãƒ‰ã®é¸æŠ/è§£é™¤
# - a: å…¨é¸æŠ
# - n: å…¨è§£é™¤
# - e: é¸æŠã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
# - Enter: ç¾åœ¨ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å€‹åˆ¥å®Ÿè¡Œ
# - q: çµ‚äº†
```

#### 2. ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ãƒ¢ãƒ¼ãƒ‰

```bash
# å®Ÿè¡Œã›ãšã«çµæœã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
usacloud-update --sandbox --dry-run --in script.sh

# å‡ºåŠ›ä¾‹:
# [DRY RUN] Would execute: usacloud server list --zone=tk1v --output-type=json
```

#### 3. ãƒãƒƒãƒãƒ¢ãƒ¼ãƒ‰

```bash
# å…¨ã‚³ãƒãƒ³ãƒ‰ã‚’è‡ªå‹•å®Ÿè¡Œï¼ˆTUIãªã—ï¼‰
usacloud-update --sandbox --batch --in script.sh

# éã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ– + ãƒãƒƒãƒå®Ÿè¡Œ
usacloud-update --sandbox --interactive=false --batch --in script.sh
```

#### 4. çµ„ã¿åˆã‚ã›ä¾‹

```bash
# ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ + ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–
usacloud-update --sandbox --dry-run --in script.sh

# ãƒãƒƒãƒ + ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³
usacloud-update --sandbox --batch --dry-run --in script.sh
```

### TUIæ“ä½œæ–¹æ³•

ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€ä»¥ä¸‹ã®ç”»é¢æ§‹æˆã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```
â”Œâ”€ ğŸ“‹ Converted Commands â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€ ğŸ” Command Details â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚âœ“ L1: usacloud server list...   â”‚â”‚Line 1:                          â”‚
â”‚  L2: usacloud disk list...     â”‚â”‚                                 â”‚
â”‚âœ“ L3: usacloud cdrom list...    â”‚â”‚Original:                        â”‚
â”‚...                             â”‚â”‚  usacloud server list --out... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚Converted:                       â”‚
                                   â”‚  usacloud server list --out... â”‚
â”Œâ”€ ğŸ“Š Execution Results â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚Rule: output-type-csv-tsv        â”‚
â”‚Execution Summary:               â”‚â”‚                                 â”‚
â”‚                                 â”‚â”‚Execution Result:                â”‚
â”‚Total Executed: 2               â”‚â”‚Status: Success                  â”‚
â”‚Successful: 2                   â”‚â”‚Duration: 1.2s                   â”‚
â”‚Failed: 0                       â”‚â”‚                                 â”‚
â”‚Skipped: 1                      â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Commands: 3  Selected: 2  Executed: 2  Successful: 2
Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100.0% (2/2) - Execution completed
```

**ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ**:
- `â†‘â†“`: ã‚³ãƒãƒ³ãƒ‰é¸æŠ
- `Space`: é¸æŠçŠ¶æ…‹ã®åˆ‡ã‚Šæ›¿ãˆ
- `Enter`: ç¾åœ¨ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
- `a`: å…¨usacloudã‚³ãƒãƒ³ãƒ‰ã‚’é¸æŠ
- `n`: å…¨ã¦ã®é¸æŠã‚’è§£é™¤
- `e`: é¸æŠã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
- `?`: ãƒ˜ãƒ«ãƒ—ãƒ‘ãƒãƒ«ã®è¡¨ç¤º/éè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆï¼ˆv1.9.0æ–°æ©Ÿèƒ½ï¼‰
- `q` ã¾ãŸã¯ `Ctrl+C`: çµ‚äº†

### BDDãƒ†ã‚¹ãƒˆï¼ˆv1.9.0å®Œå…¨å®Ÿè£…æ¸ˆã¿ï¼‰

ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½ã®BDDï¼ˆè¡Œå‹•é§†å‹•é–‹ç™ºï¼‰ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```bash
make bdd
```

**BDDæ©Ÿèƒ½ã®å®Ÿè£…çŠ¶æ³**ï¼š
- å…¨ã‚·ãƒŠãƒªã‚ªå®Ÿè£…å®Œäº†ï¼šinteractive TUIæ©Ÿèƒ½ã€ã‚³ãƒãƒ³ãƒ‰å¤‰æ›ãƒ»å®Ÿè¡Œã€çµæœè¡¨ç¤º
- 7ã¤ã®BDDã‚¹ãƒ†ãƒƒãƒ—é–¢æ•°ï¼šåŒ…æ‹¬çš„ãªã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•å®Ÿè¡Œ
- Godogçµ±åˆï¼š`features/sandbox.feature` ã«ã‚ˆã‚‹ä»•æ§˜é§†å‹•ãƒ†ã‚¹ãƒˆ
- å“è³ªä¿è¨¼ï¼šã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½ã®å‹•ä½œã‚’è‡ªå‹•æ¤œè¨¼

### åˆ¶é™äº‹é …

ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã§ã¯ä»¥ä¸‹ã®åˆ¶é™ãŒã‚ã‚Šã¾ã™ã€‚

- ãƒªã‚½ãƒ¼ã‚¹æ©Ÿèƒ½åˆ¶é™ï¼šä½œæˆã—ãŸãƒªã‚½ãƒ¼ã‚¹ã¯æ­£å¸¸ã«å‹•ä½œã—ã¾ã›ã‚“
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ¶é™ï¼šã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã¯ã‚ã‚Šã¾ã›ã‚“
- VNCã‚³ãƒ³ã‚½ãƒ¼ãƒ«ï¼šä½¿ç”¨ã§ãã¾ã›ã‚“
- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰åˆ¶é™ï¼šã‚¢ãƒ¼ã‚«ã‚¤ãƒ–/ISOã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸å¯

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

- ã‚¾ãƒ¼ãƒ³å¼·åˆ¶ï¼šå…¨ã‚³ãƒãƒ³ãƒ‰ã¯ `--zone=tk1v` ã§å®Ÿè¡Œã•ã‚Œã¾ã™
- å±é™ºæ“ä½œç¦æ­¢ï¼š`delete`, `shutdown`, `reset` ç­‰ã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“
- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼š30ç§’ã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

## å¤‰æ›ãƒ«ãƒ¼ãƒ«è©³ç´°

### 1. å‡ºåŠ›å½¢å¼ã®å¤‰æ›

**å¯¾è±¡**: `--output-type=csv`, `--output-type=tsv`, `-o csv`, `-o tsv`

**å¤‰æ›å¾Œ**: `--output-type=json`

**ç†ç”±**: v1.0 ã§ CSV/TSV å‡ºåŠ›ã¯å»ƒæ­¢ã•ã‚Œã€JSON ã®ã¿ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã™ã€‚

**å¯¾å¿œæ–¹æ³•**: CSV/TSV å½¢å¼ãŒå¿…è¦ãªå ´åˆã¯ `--query` (JMESPath) ã‚„ `jq` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦å¤‰æ›ã—ã¾ã™ã€‚

### 2. ã‚»ãƒ¬ã‚¯ã‚¿ã®å¼•æ•°åŒ–

**å¯¾è±¡**: `--selector name=xxx`, `--selector id=xxx`, `--selector tag=xxx`

**å¤‰æ›å¾Œ**: `xxx` (å¼•æ•°åŒ–)

**ç†ç”±**: v1 ã§ `--selector` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯å»ƒæ­¢ã•ã‚Œã€å¼•æ•°ã§æŒ‡å®šã™ã‚‹å½¢å¼ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚

æ³¨æ„ç‚¹ï¼šã‚¿ã‚°æŒ‡å®šã«æ›–æ˜§æ€§ãŒã‚ã‚‹ã¨å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

### 3. ãƒªã‚½ãƒ¼ã‚¹åã®çµ±ä¸€

| v0 ãƒªã‚½ãƒ¼ã‚¹å | v1.1 ãƒªã‚½ãƒ¼ã‚¹å | å¤‰æ›´ç†ç”± |
|-------------|--------------|---------|
| `iso-image` | `cdrom` | ãƒªã‚½ãƒ¼ã‚¹åã®çµ±ä¸€ |
| `startup-script` | `note` | åç§°ã®æ•´ç† |
| `ipv4` | `ipaddress` | IPv4 é–¢é€£ã®æ•´ç† |

### 4. ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®çµ±ä¸€

**å¯¾è±¡**: `product-disk`, `product-internet`, `product-server`

**å¤‰æ›å¾Œ**: `disk-plan`, `internet-plan`, `server-plan`

**ç†ç”±**: v1 ç³»ã§ã¯ `-plan` å½¢å¼ã§åç§°ãŒçµ±ä¸€ã•ã‚Œã¦ã„ã¾ã™ã€‚

### 5. å»ƒæ­¢ã‚³ãƒãƒ³ãƒ‰ã®å‡¦ç†

**å¯¾è±¡**: `usacloud summary`

**å‡¦ç†**: ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ + ä»£æ›¿æ‰‹æ®µã®æ¡ˆå†…ã§ã™ã€‚

**ä»£æ›¿æ¡ˆ**: `bill`, `self`, å„ç¨® `list` ã‚³ãƒãƒ³ãƒ‰ã¾ãŸã¯ `rest` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

### 6. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®éå¯¾å¿œ

**å¯¾è±¡**: `usacloud object-storage`, `usacloud ojs`

**å‡¦ç†**: ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ + ä»£æ›¿æ‰‹æ®µã®æ¡ˆå†…ã§ã™ã€‚

**ä»£æ›¿æ¡ˆ**: S3 äº’æ›ãƒ„ãƒ¼ãƒ«ã‚„ Terraform ã®ä½¿ç”¨ã‚’æ¤œè¨ã—ã¾ã™ã€‚

### 7. ã‚¾ãƒ¼ãƒ³æŒ‡å®šã®æ­£è¦åŒ–

**å¯¾è±¡**: `--zone = all` (ç©ºç™½ã‚ã‚Š)  
**å¤‰æ›å¾Œ**: `--zone=all` (ç©ºç™½ãªã—)  
**ç†ç”±**: è¨˜è¿°ã®çµ±ä¸€åŒ–ã§ã™ã€‚

## æ³¨æ„äº‹é …

### æ‰‹å‹•å¯¾å¿œãŒå¿…è¦ãªç®‡æ‰€

1. **ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã•ã‚ŒãŸè¡Œ**
   - `# usacloud summary` â†’ ä»£æ›¿ã‚³ãƒãƒ³ãƒ‰ã¸ã®ç½®ãæ›ãˆ
   - `# usacloud object-storage` â†’ åˆ¥ãƒ„ãƒ¼ãƒ«ã¸ã®ç§»è¡Œ

2. **ã‚»ãƒ¬ã‚¯ã‚¿ã®å¼•æ•°åŒ–**
   - ã‚¿ã‚°æŒ‡å®šã§è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ãŒãƒãƒƒãƒã™ã‚‹å ´åˆ
   - å®Ÿè¡Œå‰ã«ã‚¿ã‚°ã®ä¸€æ„æ€§ã‚’ç¢ºèª

3. **å‡ºåŠ›å½¢å¼ã®å¤‰æ›´**
   - JSON ã‹ã‚‰ CSV/TSV ã¸ã®å¾Œå‡¦ç†ãŒå¿…è¦ãªå ´åˆ
   - `--query` ã‚„ `jq` ã‚³ãƒãƒ³ãƒ‰ã®è¿½åŠ æ¤œè¨

### ãƒ•ã‚¡ã‚¤ãƒ«ã®å–ã‚Šæ‰±ã„

1. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ä½œæˆ**
   ```bash
   cp original_script.sh original_script.sh.backup
   usacloud-update --in original_script.sh --out updated_script.sh
   ```

2. **æ®µéšçš„ãªç¢ºèª**
   ```bash
   # çµ±è¨ˆã®ã¿ç¢ºèª
   usacloud-update --in script.sh --out /dev/null
   
   # å¤‰æ›å®Ÿè¡Œ
   usacloud-update --in script.sh --out script_v1.1.sh
   
   # å‹•ä½œç¢ºèª
   bash script_v1.1.sh
   ```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ã€Œå¤‰æ›ã•ã‚Œãªã„è¡ŒãŒã‚ã‚‹ã€

**åŸå› **: æƒ³å®šå¤–ã®è¨˜è¿°å½¢å¼ã‚„ã‚¹ãƒšãƒ¼ã‚¹
**å¯¾ç­–**: 
```bash
# çµ±è¨ˆå‡ºåŠ›ã§æœªå¤‰æ›è¡Œã‚’ç¢ºèª
usacloud-update --in script.sh --out /dev/null --stats=true
```

#### 2. ã€Œã‚¿ã‚°æŒ‡å®šã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã€

åŸå› ï¼šã‚¿ã‚°ã®æ›–æ˜§æ€§  
å¯¾ç­–ï¼šã‚¿ã‚°ãŒä¸€æ„ã«è­˜åˆ¥ã§ãã‚‹ã“ã¨ã‚’äº‹å‰ç¢ºèªã—ã¾ã™ã€‚

#### 3. ã€Œå‡ºåŠ›å½¢å¼ãŒæœŸå¾…ã¨ç•°ãªã‚‹ã€

åŸå› ï¼šJSON å‡ºåŠ›ã¸ã®å¤‰æ›´  
å¯¾ç­–ï¼š`--query` ã‚„ `jq` ã‚’ä½¿ç”¨ã—ãŸå¾Œå‡¦ç†ã‚’è¿½åŠ ã—ã¾ã™ã€‚

### ãƒ­ã‚°ã®æ´»ç”¨

```bash
# è©³ç´°ãªå¤‰æ›´ãƒ­ã‚°ã‚’ä¿å­˜
usacloud-update --in script.sh --out updated.sh 2> changes.log

# ãƒ­ã‚°ã®ç¢ºèª
cat changes.log
```

### ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### 1. ã€Œèªè¨¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã€

**ç—‡çŠ¶**:
```
Configuration validation failed:
SAKURACLOUD_ACCESS_TOKEN is required
```

**å¯¾ç­–**:
```bash
# ã€æ¨å¥¨ã€‘è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
cat ~/.config/usacloud-update/usacloud-update.conf

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å†ä½œæˆ
cp usacloud-update.conf.sample ~/.config/usacloud-update/usacloud-update.conf
vim ~/.config/usacloud-update/usacloud-update.conf  # APIã‚­ãƒ¼ã‚’æ­£ã—ãè¨­å®š

# ã¾ãŸã¯å¯¾è©±çš„ã«è¨­å®šã‚’ä½œæˆ
usacloud-update --sandbox  # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„å ´åˆã¯å¯¾è©±çš„ä½œæˆ

# ã€ãƒ¬ã‚¬ã‚·ãƒ¼ã€‘ç’°å¢ƒå¤‰æ•°ã®ç¢ºèªï¼ˆå»ƒæ­¢äºˆå®šï¼‰
cat .env
echo $SAKURACLOUD_ACCESS_TOKEN
```

#### 2. ã€Œusacloud CLI not found ã‚¨ãƒ©ãƒ¼ã€

**ç—‡çŠ¶**:
```
Error: usacloud CLI not found
Please install usacloud CLI: https://docs.usacloud.jp/usacloud/installation/
```

**å¯¾ç­–**:
```bash
# macOS (Homebrew)
brew install sacloud/tap/usacloud

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
usacloud version
```

#### 3. ã€Œæ¥ç¶šã‚¨ãƒ©ãƒ¼ãƒ»ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€

**ç—‡çŠ¶**:
```
command timed out after 30s
```

**å¯¾ç­–**:
```bash
# ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§äº‹å‰ç¢ºèª
usacloud-update --sandbox --dry-run --in script.sh

# ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šç¢ºèª
usacloud --zone=tk1v server list

# APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¢ºèªï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
SAKURACLOUD_API_URL=https://secure.sakura.ad.jp/cloud/zone/tk1v/api/cloud/1.1/
```

#### 4. ã€ŒTUIãŒæ­£å¸¸ã«å‹•ä½œã—ãªã„ã€

**ç—‡çŠ¶**: ç”»é¢ãŒã¡ã‚‰ã¤ãã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œãŒåŠ¹ãã¾ã›ã‚“ã€‚

**å¯¾ç­–**:
```bash
# éã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
usacloud-update --sandbox --interactive=false --batch --in script.sh

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ã‚µã‚¤ã‚ºç¢ºèªï¼ˆæœ€å°80x24æ¨å¥¨ï¼‰
echo $COLUMNS x $LINES

# ãƒ˜ãƒ«ãƒ—ãƒ‘ãƒãƒ«åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ã‚’åˆ©ç”¨ï¼ˆv1.9.0ï¼‰
# TUIå†…ã§ ? ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãƒ˜ãƒ«ãƒ—ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆ
```

#### 5. ã€Œã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œãªã„ï¼ˆã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹ï¼‰ã€

ç—‡çŠ¶ï¼šã‚³ãƒãƒ³ãƒ‰ãŒSkippedã«ãªã‚‹ã€‚

åŸå› ã¨å¯¾ç­–ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚
- ã‚³ãƒ¡ãƒ³ãƒˆè¡Œï¼š`#` ã§å§‹ã¾ã‚‹è¡Œã¯è‡ªå‹•ã‚¹ã‚­ãƒƒãƒ—
- éusacloudã‚³ãƒãƒ³ãƒ‰ï¼šusacloudä»¥å¤–ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã‚¹ã‚­ãƒƒãƒ—
- å±é™ºæ“ä½œï¼šdelete, shutdownãªã©ã¯å®‰å…¨ã®ãŸã‚ã‚¹ã‚­ãƒƒãƒ—

```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§è©³ç´°ç¢ºèª
USACLOUD_UPDATE_DEBUG=true usacloud-update --sandbox --in script.sh
```

### ãƒ‡ãƒãƒƒã‚°æ‰‹é †

1. **çµ±è¨ˆå‡ºåŠ›ã®ç¢ºèª**
   ```bash
   usacloud-update --in problematic.sh --out /dev/null
   ```

2. **éƒ¨åˆ†çš„ãªãƒ†ã‚¹ãƒˆ**
   ```bash
   echo "usacloud server list --output-type=csv" | usacloud-update
   ```

3. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã®å¾©å…ƒ**
   ```bash
   cp original.sh.backup original.sh
   ```

### é«˜åº¦ãªãƒ‡ãƒãƒƒã‚°ãƒ»é–‹ç™º

**å®Ÿè£…ãƒ¬ãƒ™ãƒ«ã®ãƒ‡ãƒãƒƒã‚°ãŒå¿…è¦ãªå ´åˆ**:
- **[å®Ÿè£…è©³ç´°ã‚¬ã‚¤ãƒ‰](ref/detailed-implementation-reference.md)** - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…éƒ¨å‹•ä½œã®ç†è§£
- **[API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](ref/api-reference.md)** - ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯ãªè§£æãƒ»ãƒ†ã‚¹ãƒˆ
- **[ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚¬ã‚¤ãƒ‰](ref/testing-framework-reference.md)** - ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä½œæˆ

## é–‹ç™ºè€…ãƒ»ä¸Šç´šè€…å‘ã‘ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### å®Ÿè£…ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°
- [å®Ÿè£…è©³ç´°ã‚¬ã‚¤ãƒ‰](ref/detailed-implementation-reference.md)ï¼š1,313+è¡Œã®åŒ…æ‹¬çš„å®Ÿè£…ã‚¬ã‚¤ãƒ‰ï¼ˆæ–°è¦ä½œæˆï¼‰
  - å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
  - æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆã¨å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
  - Transform Engineã€Validation Systemã€TUIã€Sandbox ã®å†…éƒ¨æ§‹é€ 

### ãƒ†ã‚¹ãƒˆãƒ»å“è³ªä¿è¨¼
- [ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚¬ã‚¤ãƒ‰](ref/testing-framework-reference.md)ï¼šE2E/BDD/çµ±åˆãƒ†ã‚¹ãƒˆå®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼ˆæ–°è¦ä½œæˆï¼‰
  - 56.1% ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®è©³ç´°åˆ†æ
  - BDD/E2E/çµ±åˆ/ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã®ä½¿ç”¨æ–¹æ³•
  - ã‚«ã‚¹ã‚¿ãƒ ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆã‚¬ã‚¤ãƒ‰

### APIãƒ»çµ±åˆé–‹ç™º
- [API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](ref/api-reference.md)ï¼šå…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å®Œå…¨APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - å…¨publicã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ãƒ¡ã‚½ãƒƒãƒ‰
  - å®Ÿç”¨çš„ãªã‚³ãƒ¼ãƒ‰ä¾‹ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  - ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ»æ‹¡å¼µã®ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹

### ãã®ä»–æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](ref/component-architecture.md)ï¼šã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹é€ 
- [é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼](ref/development-workflow.md)ï¼šé–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã‚¬ã‚¤ãƒ‰](ref/testing-guide.md)ï¼šå¤šå±¤ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

## é–¢é€£ãƒªãƒ³ã‚¯

### åŸºæœ¬ãƒªãƒ³ã‚¯
- [usacloud v1.0.0 ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰](https://docs.usacloud.jp/usacloud/upgrade/v1_0_0/)
- [usacloud v1.1 ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://docs.usacloud.jp/usacloud/)
- [ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ API v1.1](https://manual.sakura.ad.jp/cloud-api/1.1/)
- [usacloud GitHub ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/sacloud/usacloud/)

### ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹æ©Ÿèƒ½é–¢é€£
- [ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒ](https://manual.sakura.ad.jp/cloud/server/sandbox.html)
- [usacloud CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰](https://docs.usacloud.jp/usacloud/installation/)
- [ã•ãã‚‰ã®ã‚¯ãƒ©ã‚¦ãƒ‰ APIã‚­ãƒ¼ç®¡ç†](https://manual.sakura.ad.jp/cloud/api/apikey.html)
- [Godog BDD Framework](https://github.com/cucumber/godog)
- [tview TUI Library](https://github.com/rivo/tview)

## ã‚µãƒãƒ¼ãƒˆ

ãƒ„ãƒ¼ãƒ«ã«é–¢ã™ã‚‹å•é¡Œã‚„æ”¹å–„è¦æœ›ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® GitHub Issues ã§å ±å‘Šã—ã¦ãã ã•ã„ã€‚

å¤‰æ›çµæœã¯å¿…ãšäº‹å‰ã«ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ç¢ºèªã—ã€æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨å‰ã«ååˆ†ãªæ¤œè¨¼ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚